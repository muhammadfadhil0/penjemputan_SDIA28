<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status Penjemputan Kelas - SDIA 28</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        primaryLight: '#60A5FA',
                        primaryLighter: '#DBEAFE',
                        bgMain: '#FAFAFA',
                        cardBg: '#FFFFFF',
                        borderColor: '#E5E7EB',
                        textPrimary: '#111827',
                        textSecondary: '#6B7280',
                        textMuted: '#9CA3AF',
                        success: '#10B981',
                        successLight: '#D1FAE5',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <style>
        * {
            font-family: 'Inter', sans-serif;
            box-sizing: border-box;
        }

        html,
        body {
            height: 100vh;
            overflow: hidden;
            margin: 0;
            padding: 0;
        }

        /* Card animation styles */
        .student-card {
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .student-card.picked-up {
            background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);
            border-color: #34D399;
        }

        .student-card.not-picked-up {
            background: linear-gradient(135deg, #F3F4F6 0%, #E5E7EB 100%);
            border-color: #D1D5DB;
        }

        /* Edit mode animations */
        @keyframes wiggle {

            0%,
            100% {
                transform: rotate(-1deg) scale(0.95);
            }

            25% {
                transform: rotate(1deg) scale(0.95);
            }

            50% {
                transform: rotate(-1deg) scale(0.95);
            }

            75% {
                transform: rotate(1deg) scale(0.95);
            }
        }

        .edit-mode .student-card {
            animation: wiggle 0.4s ease-in-out infinite;
            cursor: pointer;
        }

        .edit-mode .student-card:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        /* Button transitions */
        .header-btn {
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .header-btn:hover {
            transform: scale(1.05);
        }

        .header-btn:active {
            transform: scale(0.95);
        }

        /* Card appearing animation */
        @keyframes cardAppear {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .card-appear {
            animation: cardAppear 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        /* Card flip animation */
        .card-container {
            perspective: 1000px;
        }

        .student-card {
            transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .student-card.flipping {
            animation: none !important;
        }

        .student-card.flip-to-picked {
            animation: flipToPicked 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards !important;
        }

        .student-card.flip-to-unpicked {
            animation: flipToUnpicked 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards !important;
        }

        @keyframes flipToPicked {
            0% {
                transform: rotateY(0deg) scale(0.95);
            }

            50% {
                transform: rotateY(90deg) scale(0.9);
            }

            100% {
                transform: rotateY(0deg) scale(0.95);
            }
        }

        @keyframes flipToUnpicked {
            0% {
                transform: rotateY(0deg) scale(0.95);
            }

            50% {
                transform: rotateY(-90deg) scale(0.9);
            }

            100% {
                transform: rotateY(0deg) scale(0.95);
            }
        }

        .main-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .grid-wrapper {
            flex: 1;
            padding: 16px;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .grid-container {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 12px;
            min-height: 0;
        }

        .student-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            border-width: 2px;
            padding: 8px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .student-name {
            font-size: 10px;
            font-weight: 500;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }

        .student-status {
            font-size: 9px;
            margin-top: 2px;
        }

        @media (max-width: 1200px) {
            .grid-container {
                grid-template-columns: repeat(8, 1fr);
                grid-template-rows: repeat(5, 1fr);
            }
        }
    </style>
</head>

<body class="bg-bgMain">
    <div class="main-container">
        <!-- Header -->
        <header class="bg-cardBg border-b border-borderColor shadow-sm sticky top-0 z-40 flex-shrink-0">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div
                            class="w-12 h-12 rounded-full bg-primaryLighter border-2 border-primaryLight flex items-center justify-center shadow-lg shadow-primary/20">
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-xl font-semibold text-textPrimary">Status Penjemputan</h1>
                            <p class="text-sm text-textMuted">Kelas 3A - 40 Siswa</p>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex items-center gap-3" id="actionButtons">
                        <!-- Fullscreen Button -->
                        <button id="fullscreenBtn" onclick="toggleFullscreen()"
                            class="header-btn bg-gray-100 hover:bg-gray-200 text-textSecondary px-4 py-2.5 rounded-xl font-semibold flex items-center gap-2 border border-borderColor">
                            <svg id="fullscreenIcon" class="w-5 h-5" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />
                            </svg>
                        </button>

                        <!-- Edit Button -->
                        <button id="editBtn" onclick="toggleEditMode()"
                            class="header-btn bg-primary hover:bg-blue-600 text-white px-5 py-2.5 rounded-xl font-semibold flex items-center gap-2 shadow-lg shadow-primary/30">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                            </svg>
                            <span>Edit</span>
                        </button>

                        <!-- Save & Cancel Buttons (Hidden by default) -->
                        <div id="saveButtons" class="hidden flex items-center gap-3">
                            <button onclick="cancelEdit()"
                                class="header-btn bg-gray-100 hover:bg-gray-200 text-textSecondary px-5 py-2.5 rounded-xl font-semibold flex items-center gap-2 border border-borderColor">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M6 18L18 6M6 6l12 12" />
                                </svg>
                                <span>Batal</span>
                            </button>
                            <button onclick="saveChanges()"
                                class="header-btn bg-success hover:bg-green-600 text-white px-5 py-2.5 rounded-xl font-semibold flex items-center gap-2 shadow-lg shadow-success/30">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M5 13l4 4L19 7" />
                                </svg>
                                <span>Simpan</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Student Cards Grid -->
        <div class="grid-wrapper">
            <div class="grid-container" id="studentsGrid">
                <!-- Student cards will be generated here -->
            </div>
        </div>
    </div>

    <script>
        // Dummy data - 40 students
        const students = [
            { id: 1, name: "Ahmad Farhan", picked: false },
            { id: 2, name: "Aisyah Putri", picked: false },
            { id: 3, name: "Budi Santoso", picked: false },
            { id: 4, name: "Citra Dewi", picked: false },
            { id: 5, name: "Dimas Prasetya", picked: false },
            { id: 6, name: "Eka Safitri", picked: false },
            { id: 7, name: "Fajar Nugroho", picked: false },
            { id: 8, name: "Gita Nirmala", picked: false },
            { id: 9, name: "Hadi Wijaya", picked: false },
            { id: 10, name: "Indah Permata", picked: false },
            { id: 11, name: "Joko Susilo", picked: false },
            { id: 12, name: "Kartika Sari", picked: false },
            { id: 13, name: "Lukman Hakim", picked: false },
            { id: 14, name: "Maya Anggraini", picked: false },
            { id: 15, name: "Naufal Rizky", picked: false },
            { id: 16, name: "Olivia Rahma", picked: false },
            { id: 17, name: "Putra Mahardika", picked: false },
            { id: 18, name: "Qori Amelia", picked: false },
            { id: 19, name: "Rafi Pratama", picked: false },
            { id: 20, name: "Siti Nurhaliza", picked: false },
            { id: 21, name: "Taufik Hidayat", picked: false },
            { id: 22, name: "Umi Kalsum", picked: false },
            { id: 23, name: "Vino Bastian", picked: false },
            { id: 24, name: "Wulan Sari", picked: false },
            { id: 25, name: "Xavier Putra", picked: false },
            { id: 26, name: "Yuni Shara", picked: false },
            { id: 27, name: "Zaki Rahman", picked: false },
            { id: 28, name: "Anisa Rahma", picked: false },
            { id: 29, name: "Bayu Segara", picked: false },
            { id: 30, name: "Cindy Claudia", picked: false },
            { id: 31, name: "Deni Sumargo", picked: false },
            { id: 32, name: "Elsa Frozen", picked: false },
            { id: 33, name: "Farel Prayoga", picked: false },
            { id: 34, name: "Gisella Kiki", picked: false },
            { id: 35, name: "Hafiz Quran", picked: false },
            { id: 36, name: "Irene Kim", picked: false },
            { id: 37, name: "Jihan Audy", picked: false },
            { id: 38, name: "Kevin Julio", picked: false },
            { id: 39, name: "Lala Karmela", picked: false },
            { id: 40, name: "Muhammad Ali", picked: false }
        ];

        let isEditMode = false;
        let originalState = [];

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderStudents();
        });

        // Render student cards
        function renderStudents() {
            const grid = document.getElementById('studentsGrid');
            grid.innerHTML = '';

            students.forEach((student, index) => {
                const card = document.createElement('div');
                card.className = `student-card ${student.picked ? 'picked-up' : 'not-picked-up'}`;
                card.style.animationDelay = `${index * 0.02}s`;
                card.classList.add('card-appear');
                card.dataset.id = student.id;

                if (isEditMode) {
                    card.onclick = () => toggleStudentStatus(student.id);
                }

                const initials = student.name.split(' ').map(n => n[0]).join('').substring(0, 2);

                card.innerHTML = `
                    <div class="avatar ${student.picked ? 'bg-success text-white' : 'bg-gray-200 text-textSecondary'}">
                        ${student.picked ? `
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        ` : initials}
                    </div>
                    <p class="student-name ${student.picked ? 'text-green-800' : 'text-textSecondary'}" title="${student.name}" style="font-size: 14px">
                        ${student.name}
                    </p>
                    ${student.picked ? '<p class="student-status text-green-600">Sudah dijemput</p>' : ''}
                `;

                grid.appendChild(card);
            });
        }

        // Toggle edit mode
        function toggleEditMode() {
            isEditMode = true;
            originalState = students.map(s => ({ ...s }));

            document.getElementById('editBtn').classList.add('hidden');
            document.getElementById('saveButtons').classList.remove('hidden');
            document.getElementById('studentsGrid').classList.add('edit-mode');

            // Re-render to add click handlers
            renderStudents();
        }

        // Toggle student picked status
        function toggleStudentStatus(id) {
            if (!isEditMode) return;

            const student = students.find(s => s.id === id);
            if (student) {
                const wasPicked = student.picked;
                student.picked = !student.picked;

                // Find and update the card with flip animation
                const card = document.querySelector(`[data-id="${id}"]`);
                if (card) {
                    // Add flip animation class based on new status
                    const flipClass = student.picked ? 'flip-to-picked' : 'flip-to-unpicked';
                    card.classList.add(flipClass);

                    // Update card content at the midpoint of animation (when card is sideways)
                    setTimeout(() => {
                        updateCardContent(card, student);
                    }, 300);

                    // Remove flip class after animation completes
                    setTimeout(() => {
                        card.classList.remove(flipClass);
                    }, 600);
                }
            }
        }

        // Update card content without re-rendering
        function updateCardContent(card, student) {
            const initials = student.name.split(' ').map(n => n[0]).join('').substring(0, 2);

            // Update card classes
            card.classList.remove('picked-up', 'not-picked-up');
            card.classList.add(student.picked ? 'picked-up' : 'not-picked-up');

            // Update card content
            card.innerHTML = `
                <div class="avatar ${student.picked ? 'bg-success text-white' : 'bg-gray-200 text-textSecondary'}">
                    ${student.picked ? `
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    ` : initials}
                </div>
                <p class="student-name ${student.picked ? 'text-green-800' : 'text-textSecondary'}" title="${student.name}" style="font-size: 14px">
                    ${student.name}
                </p>
                ${student.picked ? '<p class="student-status text-green-600">Sudah dijemput</p>' : ''}
            `;

            // Re-attach click handler
            card.onclick = () => toggleStudentStatus(student.id);
        }

        // Cancel edit
        function cancelEdit() {
            // Restore original state
            students.forEach((student, index) => {
                student.picked = originalState[index].picked;
            });

            exitEditMode();
            renderStudents();
        }

        // Save changes
        function saveChanges() {
            // In a real app, you would save to backend here
            exitEditMode();
            renderStudents();
        }

        // Exit edit mode
        function exitEditMode() {
            isEditMode = false;
            document.getElementById('editBtn').classList.remove('hidden');
            document.getElementById('saveButtons').classList.add('hidden');
            document.getElementById('studentsGrid').classList.remove('edit-mode');
        }

        // Toggle fullscreen mode
        function toggleFullscreen() {
            const icon = document.getElementById('fullscreenIcon');

            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    // Change to exit fullscreen icon
                    icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25" />`;
                }).catch(err => {
                    console.log('Fullscreen error:', err);
                });
            } else {
                document.exitFullscreen().then(() => {
                    // Change to enter fullscreen icon
                    icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />`;
                });
            }
        }

        // Listen for fullscreen change to update icon
        document.addEventListener('fullscreenchange', () => {
            const icon = document.getElementById('fullscreenIcon');
            if (document.fullscreenElement) {
                icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25" />`;
            } else {
                icon.innerHTML = `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" />`;
            }
        });
    </script>
</body>

</html>